import{d as g,r,b as w,w as o,u as a,I,e as l,f as c,g as y,h as p,i as C,C as v,D as E,E as V,G as U,H as k,v as N,J as f,N as O,x as S,y as T}from"./index-BAKnMHDu.js";import{f as B,c as D,d as K}from"./firebase-CA3CGHmd.js";const H=g({__name:"AddExpense",setup(P){const x=S(),n=r(""),s=r(null),d=r("expense"),u=r(""),i=r(""),b=async()=>{if(!n.value||!s.value||!u.value){await(await f.create({header:"Incomplete Form",message:"Please fill in all required fields.",buttons:["OK"]})).present();return}const m=await O.create({message:"Saving..."});await m.present();try{await B(D(K,"expenses"),{title:n.value,amount:Number(s.value),type:d.value,category:u.value,note:i.value,createdAt:new Date}),await(await f.create({header:"Success",message:"Expense saved successfully!",buttons:["OK"]})).present(),n.value="",s.value=null,d.value="expense",u.value="",i.value="",x.replace("/tabs/list")}catch(e){console.error("Error saving expense: ",e),await(await f.create({header:"Error",message:"Failed to save expense. Please try again.",buttons:["OK"]})).present()}finally{await m.dismiss()}};return(m,e)=>(T(),w(a(I),null,{default:o(()=>[l(a(C),null,{default:o(()=>[l(a(c),null,{default:o(()=>[l(a(y),null,{default:o(()=>[...e[5]||(e[5]=[p("เพิ่มรายการ",-1)])]),_:1})]),_:1})]),_:1}),l(a(N),{class:"ion-padding"},{default:o(()=>[l(a(v),{label:"ชื่อรายการ",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t)},null,8,["modelValue"]),l(a(v),{label:"จำนวนเงิน",type:"number",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value=t)},null,8,["modelValue"]),l(a(E),{label:"ประเภท",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t)},{default:o(()=>[l(a(V),{value:"income"},{default:o(()=>[...e[6]||(e[6]=[p("รายรับ",-1)])]),_:1}),l(a(V),{value:"expense"},{default:o(()=>[...e[7]||(e[7]=[p("รายจ่าย",-1)])]),_:1})]),_:1},8,["modelValue"]),l(a(v),{label:"หมวดหมู่",modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t)},null,8,["modelValue"]),l(a(U),{label:"หมายเหตุ",modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t)},null,8,["modelValue"]),l(a(k),{expand:"block",onClick:b},{default:o(()=>[...e[8]||(e[8]=[p(" บันทึก ",-1)])]),_:1})]),_:1})]),_:1}))}});export{H as default};
