System.register(["./index-legacy-DZ4gBzo9.js","./firebase-legacy-ugmyyq_q.js"],function(e,l){"use strict";var t,n,u,a,d,o,s,i,r,c,f,p,_,m,g,v,y,x,b,h,k,j,q,w,A,C,E,F,N,S,z,D,I,L;return{setters:[e=>{t=e.d,n=e.r,u=e.c,a=e.o,d=e.a,o=e.b,s=e.w,i=e.u,r=e.I,c=e.e,f=e.f,p=e.g,_=e.h,m=e.i,g=e.j,v=e.k,y=e.l,x=e.m,b=e.n,h=e.t,k=e.p,j=e.q,q=e.s,w=e.F,A=e.v,C=e.x,E=e.y,F=e.z,N=e.A},e=>{S=e.q,z=e.o,D=e.c,I=e.a,L=e.d}],execute:function(){e("default",t({__name:"ExpenseList",setup(e){const l=C(),t=n([]);let R=null;const $=u(()=>t.value.filter(e=>"income"===e.type).reduce((e,l)=>e+(Number(l.amount)||0),0)),B=u(()=>t.value.filter(e=>"expense"===e.type).reduce((e,l)=>e+(Number(l.amount)||0),0));return a(()=>{const e=S(D(L,"expenses"),z("createdAt","desc"));R=I(e,e=>{console.log("Docs found:",e.docs.length),t.value=e.docs.map(e=>{const l=e.data();return{id:e.id,...l}})},e=>{if(console.error("Firebase Snapshot Error:",e),"failed-precondition"===e.code){console.log("Retrying without sort (potential missing index)");const e=D(L,"expenses");R=I(e,e=>{t.value=e.docs.map(e=>({id:e.id,...e.data()}))})}})}),d(()=>{R&&R()}),(e,n)=>(E(),o(i(r),null,{default:s(()=>[c(i(m),null,{default:s(()=>[c(i(f),null,{default:s(()=>[c(i(p),null,{default:s(()=>[...n[0]||(n[0]=[_("รายการรายรับ–รายจ่าย",-1)])]),_:1})]),_:1})]),_:1}),c(i(A),{class:"ion-padding"},{default:s(()=>[c(i(g),null,{default:s(()=>[c(i(v),null,{default:s(()=>[c(i(y),null,{default:s(()=>[...n[1]||(n[1]=[_("สรุป",-1)])]),_:1})]),_:1}),c(i(x),null,{default:s(()=>[b("p",null,"รวมรายรับ: "+h($.value)+" บาท",1),b("p",null,"รวมรายจ่าย: "+h(B.value)+" บาท",1)]),_:1})]),_:1}),c(i(k),null,{default:s(()=>[(E(!0),j(w,null,q(t.value,e=>(E(),o(i(F),{key:e.id,button:"",onClick:t=>{return n=e.id,void l.push(`/edit/${n}`);var n}},{default:s(()=>[c(i(N),null,{default:s(()=>[b("h2",null,h(e.title)+" ("+h(e.type)+")",1),b("p",null,h(e.category)+" • "+h(e.amount)+" บาท",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}))}}))}}});
